<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ThreePresenter - Interactive 3D Model Viewer</title>
  
  <!-- Bootstrap CSS and Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  
  <!-- Custom Styles -->
  <link href="styles.css" rel="stylesheet">
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1>ThreePresenter</h1>
    <p>Framework-agnostic 3D viewer library built on Three.js</p>
  </div>

  <!-- (Features block moved below the 3D viewer) -->

  <!-- 3D Viewer -->
  <div class="container">
    <div class="viewer-container">
      <div id="viewer" class="viewer">
        <div id="loading" class="loading-overlay">
          <div class="spinner"></div>
          <div class="loading-text">Loading 3D model...</div>
        </div>
      </div>
      <div class="controls-info mt-3 text-center">
        <div class="d-flex justify-content-center gap-4 flex-wrap">
          <span><strong>Left Drag:</strong> Rotate camera</span>
          <span><strong>Right Drag:</strong> Pan view</span>
          <span><strong>Scroll:</strong> Zoom in/out</span>
          <span><strong>Double Click:</strong> Recenter view</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Features -->
  <div class="container mt-4">
    <div class="grid grid-3">
      <div class="card">
        <h4><i class="bi bi-lightning-charge-fill"></i> Zero Configuration</h4>
        <p>Just include the script and start loading 3D models. Works out of the box with sensible defaults.</p>
      </div>
      <div class="card">
        <h4><i class="bi bi-box-seam"></i> Multi-Format Support</h4>
        <p>Load GLB, GLTF, PLY, OBJ, and Nexus multiresolution models seamlessly.</p>
      </div>
      <div class="card">
        <h4><i class="bi bi-pin-map-fill"></i> Annotations</h4>
        <p>Add point, line, and area annotations with interactive selection and picking.</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-links">
      <a href="https://github.com/cnr-isti-vclab/ThreePresenter" class="btn">
        <i class="bi bi-github"></i>
        View on GitHub
      </a>
      <a href="./examples.html" class="btn">
        <i class="bi bi-code-square"></i>
        Examples
      </a>
      <a href="./api/index.html" class="btn">
        <i class="bi bi-file-text"></i>
        API Documentation
      </a>
    </div>
    <p class="mt-1 opacity-80">
      Developed by <a href="https://vcg.isti.cnr.it">CNR-ISTI Visual Computing Lab</a>
    </p>
  </div>

  <!-- Three.js from CDN (ES Module) -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.180.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.180.0/examples/jsm/"
      }
    }
  </script>

  <!-- ThreePresenter ES module -->
  <script type="module">
    import { ThreePresenter } from './dist/three-presenter.js';
    
    // Initialize ThreePresenter
    const presenter = new ThreePresenter('viewer');

    // Define the scene
    const sceneDescription = {
      projectId: 'demo',
      models: [{
        id: 'venus',
        file: 'venus.glb',
        rotation: [-90, 0, 0],
      }],
      environment: {
        showGround: true,
        background: '#2c2c2c'
      }
    };

    // Load the scene
    presenter.loadScene(sceneDescription)
      .then(() => {
        console.log('Scene loaded successfully!');
        
        // Hide loading indicator
        const loading = document.getElementById('loading');
        loading.classList.add('hidden');
        setTimeout(() => loading.remove(), 300);
        
        // Show control buttons
        presenter.setButtonVisible('home', true);
        presenter.setButtonVisible('light', true);
        presenter.setButtonVisible('camera', true);
        presenter.setButtonVisible('screenshot', true);
      })
      .catch((error) => {
        console.error('Error loading scene:', error);
        
        // Hide loading and show error
        const loading = document.getElementById('loading');
        loading.innerHTML = '<div class="loading-text" style="color: #ff6b6b;">Failed to load model</div>';
        setTimeout(() => loading.classList.add('hidden'), 2000);
      });
  </script>
</body>
</html>
